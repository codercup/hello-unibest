import{d as e,p as a,r as l,o as s,c as t,w as n,a as o,b as r,u as A,q as u,s as i,e as c,m as d,i as f,v as m,I as g,_ as p,x as b,t as v,y as I,z as Q,A as x,B as C,C as D,f as h}from"./index-0a3984b0.js";import{h as y}from"./http.5a5d2fc5.js";import{_ as B}from"./fly-content.vue_vue_type_script_setup_true_lang.27cd66dd.js";const E="data:image/png;base64,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",V=p(e({__name:"fly-login",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:p}){const b=a(),v=l(E),I=l(""),Q=()=>{p("update:modelValue",!1)},x=e=>{const{avatarUrl:a}=e.detail;v.value=a},C=e=>{const{value:a}=e.detail;I.value=a},D=()=>{v.value!==E?I.value?(p("update:modelValue",!1),b.setUserInfo({nickname:I.value,avatar:v.value})):i({title:"请填写昵称",icon:"none"}):i({title:"请选择头像",icon:"none"})};return(a,l)=>{const i=c,p=d,b=f,I=m,h=g;return e.modelValue?(s(),t(i,{key:0,class:"fly-login"},{default:n((()=>[o(i,{class:"fly-login-mask"}),o(i,{class:"fly-login-content px-4"},{default:n((()=>[o(i,{class:"font-bold h-16 leading-16"},{default:n((()=>[r("获取您的昵称、头像")])),_:1}),o(i,{class:"rounded-full bg-light-600 w-6 h-6 text-center absolute top-4 right-4",onClick:Q},{default:n((()=>[o(i,{class:"i-carbon-close text-gray-700"})])),_:1}),o(i,{class:"flex items-center h-16 leading-16 border-b-gray-400 border-b-solid border-[1rpx]"},{default:n((()=>[o(p,{class:"mr-4 flex-shrink-0"},{default:n((()=>[r("头像")])),_:1}),o(I,{class:"bg-transparent flex items-center after:b-none w-full h-12 leading-12","open-type":"chooseAvatar",onChooseavatar:x},{default:n((()=>[o(b,{class:"w-8 h-8 rounded-full",src:A(v)},null,8,["src"]),o(p,{class:"ml-auto i-carbon-chevron-right"})])),_:1})])),_:1}),o(i,{class:"flex items-center h-16 leading-16 border-b-gray-400 border-b-solid border-1 mt-4"},{default:n((()=>[o(p,{class:"mr-4 flex-shrink-0"},{default:n((()=>[r("昵称")])),_:1}),o(h,{type:"nickname",placeholder:"请输入昵称",onChange:C,onBlur:C})])),_:1}),o(I,{size:"default",type:"default",style:{color:"#fff","background-color":"#1aad19","border-color":"#1aad19"},class:"text-center leading-12 w-40 my-4",onClick:D},{default:n((()=>[r(" 确定 ")])),_:1})])),_:1})])),_:1})):u("",!0)}}}),[["__scopeId","data-v-1367a9bb"]]),N=e({name:"WxLogin"}),k=e({...N,setup(e){const i=l(!1),d=a(),g=b((()=>{var e;return null==(e=d.userInfo)?void 0:e.nickname})),p=()=>{Q({title:"确认退出当前账号？",success:e=>{e.confirm&&d.clearUserInfo()}})};return(e,a)=>{const l=f,b=c,Q=x(C("fly-login"),V),D=x(C("fly-content"),B),h=m;return s(),t(b,{class:"p-4"},{default:n((()=>[A(g)?(s(),t(b,{key:0,class:"flex items-center leading-6"},{default:n((()=>{var e;return[o(l,{class:"w-8 h-8 rounded-full",src:null==(e=A(d).userInfo)?void 0:e.avatar},null,8,["src"]),o(b,{class:"ml-2"},{default:n((()=>{var e;return[r(v(null==(e=A(d).userInfo)?void 0:e.nickname),1)]})),_:1})]})),_:1})):(s(),t(b,{key:1,class:"flex items-center leading-6",onClick:a[0]||(a[0]=e=>i.value=!0)},{default:n((()=>[o(b,{class:"i-carbon-user-avatar"}),o(b,{class:"ml-2"},{default:n((()=>[r("点击显示微信头像")])),_:1})])),_:1})),o(Q,{modelValue:A(i),"onUpdate:modelValue":a[1]||(a[1]=e=>I(i)?i.value=e:null)},null,8,["modelValue"]),o(D,{line:10}),A(g)?(s(),t(h,{key:2,class:"mt-2",onClick:p},{default:n((()=>[r("退出登录")])),_:1})):u("",!0)])),_:1})}}}),X=e({__name:"index",setup(e){const u=a(),i=l("");return D({provider:"weixin",success:async({code:e})=>{const a=await y({method:"GET",url:"/weixin/jscode2session",data:{code:e}});i.value=a.result.openid,u.setUserInfo({openid:a.result.openid})}}),(e,a)=>{const l=c,u=h("layout-default-uni");return s(),t(u,null,{default:n((()=>[o(l,{class:"ml-4"},{default:n((()=>[r("wx的openid: ")])),_:1}),o(l,{class:"ml-4"},{default:n((()=>[r(v(A(i)),1)])),_:1}),o(k)])),_:1})}}});export{X as default};
